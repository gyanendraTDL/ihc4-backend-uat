package com.tdl.river.Repository;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.List;
import java.util.Set;
import javax.transaction.Transactional;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

import com.tdl.river.models.Ticket;


@Repository
public interface TicketDAO extends JpaRepository<Ticket, Integer>{

	@Query(value="select IFNULL(MAX(ticket_number)+1, 1) from itx_ticket t where t.companyid=:companyID and t.branchid=:branchID",nativeQuery = true)
	Integer getMaxTicketNo(int companyID, int branchID);

	@Query(value="select count(*) from ifb_feedback fb, itx_ticket t , itx_users u where u.id=fb.created_by and t.feedbackid=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID )  and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno)",nativeQuery = true)
	Integer getTicketCount(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID, String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);

	/*@Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID),'-' , t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name  from ifb_feedback fb, itx_ticket t where t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by fb.created_date desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findCompiantData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno);
	 */
//	@Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)), (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by)  closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective ,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause, fb.ipno, 'fbcmts',(IFNULL(ELT(FIELD(fc.comment1,'undefined'),' ',' '), fc.comment1)) from ifb_feedback fb, itx_ticket t,itx_users u,ifb_feedback_comments fc where u.id=fb.created_by and t.feedbackid=fb.id  and fc.feedbackID=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by t.ticket_number desc,t.id desc limit :page1,:page2",nativeQuery = true)
	@Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)), (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by)  closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective ,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause, fb.ipno, 'fbcmts',(IFNULL(ELT(FIELD(fc.comment3,'undefined'),' ',' '), fc.comment3)),(IFNULL(ELT(FIELD(fc.comment4,'undefined'),' ',' '), fc.comment4)),(IFNULL(ELT(FIELD(fc.comment5,'undefined'),' ',' '), fc.comment5)),(IFNULL(ELT(FIELD(fc.comment1,'undefined'),' ',' '), fc.comment1)),(IFNULL(ELT(FIELD(fc.comment6,'undefined'),' ',' '), fc.comment6)),(IFNULL(ELT(FIELD(fc.comment7,'undefined'),' ',' '), fc.comment7)),(IFNULL(ELT(FIELD(fc.comment8,'undefined'),' ',' '), fc.comment8)),(select col_que from im_factor_questions fq where fq.id=t.factor_number and col_que<=7 ) from ifb_feedback fb, itx_ticket t,itx_users u,ifb_feedback_comments fc where u.id=fb.created_by and t.feedbackid=fb.id  and fc.feedbackID=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by t.ticket_number desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findCompiantDataSunway(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);

	 @Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)), (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by)  closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective ,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause, fb.ipno, 'fbcmts',t.feedbackid,t.audio_comments,'dummyData'  from ifb_feedback fb, itx_ticket t,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by t.ticket_number desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findCompiantData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);

	@Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)), (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by)  closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective ,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,t.dep_note,'fbcmts'  from ifb_feedback fb, itx_ticket t,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id  and date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by t.ticket_number desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findCompiantDataFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);
	
	
	@Query(value="select fb.id, (SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'),'-' , t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,t.note1,t.note2,fb.deptid ,fb.type, fb.bed_no ,fb.room_no , t.preventive , t.callcenter , fb.opd_name,t.factor_number,t.root_cause,'fbcmts'  from ifb_feedback fb, itx_ticket t,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by t.ticket_number desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findCompiantDataForBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);

	
	//For MPH for Misclassification we are using is_sub_ticket=1 
	@Transactional
	@Modifying
	@Query(value="update itx_ticket set escalationid=:escalationID,is_sub_ticket=1 where id=:id",nativeQuery = true) 
	void updateEscalation(int escalationID, int id);

	@Query(value="select (select u.username from itx_users u where u.id=t.closed_by),(HOUR(TIMEDIFF(t.closed_by_date,t.created_date))) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> avgAction(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select distinct fb.id from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id and t.id=te.ticketid  and Date(fb.created_date)>=:startDate and date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno)",nativeQuery = true)
	List<String[]> getMyTicketCount(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID, Integer clusterID,
			Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);

	@Query(value="select distinct t.id from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id and t.id=te.ticketid  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno)",nativeQuery = true)
	List<String[]> getMyTicketCountAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID, Integer clusterID,
			Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);
		
	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'NA','fbcmts',(IFNULL(ELT(FIELD(fc.comment1,'undefined'),' ',' '), fc.comment1))  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u,ifb_feedback_comments fc where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fc.feedbackID=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantDataSunway(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);
	
	
	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'fbcmts'    from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);
	
	@Query(value="select distinct t.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'NA','fbcmts',t.feedbackid    from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantDataAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);

	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,t.dep_note,'fbcmts' from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantDataFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);

	@Query(value="select distinct fb.id, (SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'),'-', t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally,t.note1,t.note2,fb.deptid ,fb.type, fb.bed_no ,fb.room_no , t.preventive , t.callcenter , fb.opd_name,t.factor_number,t.root_cause,'fbcmts' from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantDataForBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo,String ipno);

	
	@Query(value="select  distinct fb.id from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id and t.id=te.ticketid and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and t.status!=3 and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno)",nativeQuery = true)
	List<String[]> getPendingTicketCount(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, 
			Integer countryID, Integer clusterID,Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);

	@Query(value="select  distinct t.id from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id and t.id=te.ticketid and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and t.status!=3 and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno)",nativeQuery = true)
	List<String[]> getPendingTicketCountAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, 
			Integer countryID, Integer clusterID,Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);

	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'NA','fbcmts',(IFNULL(ELT(FIELD(fc.comment1,'undefined'),' ',' '), fc.comment1)) from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u ,ifb_feedback_comments fc where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fc.feedbackID=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantDataSunway(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);
	
	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'fbcmts'   from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);
	
	@Query(value="select distinct t.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,'NA','fbcmts',t.feedbackid  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantDataAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);
	
	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,t.dep_note,'fbcmts' from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantDataFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);

	@Query(value="select distinct fb.id, (SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'),'-',t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally,t.note1,t.note2,fb.deptid ,fb.type, fb.bed_no ,fb.room_no , t.preventive , t.callcenter , fb.opd_name,t.factor_number,t.root_cause,'fbcmts'  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantDataForBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,
			Integer userID,String filterStatus, String filterUser, String factorNumber, String refNo, String name, String ticketNo,String ipno);
	
	
	/*
	 * @Query("select * from Ticket t") Page<Ticket> findTicketData(Pageable
	 * pageable );
	 * 
	 * @Query(
	 * value="select * from Ticket where createdDate>=:minusMonths and createdDate <=:now"
	 * , countQuery =
	 * "select count(v) from Ticket v v.createdDate>=:minusMonths and v.createdDate <=:now"
	 * ) Page<Ticket> getData(LocalDateTime minusMonths, LocalDateTime now, Pageable
	 * paging);
	 */

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.audio_comments,t.note,(select concat(t.dep_note,'-',(SELECT modified_date FROM itx_ticket_escalation te where te.note!='' and te.ticketid=t.id and t.escalationid=te.escalationid limit 1 ))) as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadDataCA(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);
	
//	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.username from itx_users u where u.id=(select update_by FROM itx_ticket_status_logs where ticketid=t.id order by update_date desc limit 1)) as updatedBy,(select DATE_FORMAT((select update_date FROM itx_ticket_status_logs where ticketid=t.id order by update_date desc limit 1), '%d-%m-%Y %H:%i:%s')) as updatedDate,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,(SELECT CONCAT(t.dep_note,(select CONCAT ((select u.username from itx_users u where u.id= ite.modified_by),ite.modified_date) FROM itx_ticket_escalation ite where ticketid=t.id order By ite.modified_date desc limit 1))) as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.ipno,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.username from itx_users u where u.id=(select update_by FROM itx_ticket_status_logs where ticketid=t.id order by update_date desc limit 1)) as updatedBy,(select DATE_FORMAT((select update_date FROM itx_ticket_status_logs where ticketid=t.id order by update_date desc limit 1), '%d-%m-%Y %H:%i:%s')) as updatedDate,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,(SELECT CONCAT(t.dep_note,(select CONCAT ((select u.username from itx_users u where u.id= ite.modified_by),ite.modified_date) FROM itx_ticket_escalation ite where ticketid=t.id order By ite.modified_date desc limit 1))) as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadDataSunway(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);


//	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.comments,(IFNULL(ELT(FIELD(fb.rating,'-1'),'NA'), fb.rating)),(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadDataAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT  @sl\\:=@sl+1 as sID,CONCAT((select GROUP_CONCAT(IFNULL( REPLACE(tee.note,'\\n',''), ' ') , '~', IFNULL( (select user.first_name from itx_users user where user.id=tee.modified_by), ' ') ,'~', IFNULL( tee.modified_date, ' ') SEPARATOR '~' )) followUp from itx_ticket_escalation tee where tee.ticketID=t.id and tee.note is not null and tee.note!='' order by `created_date` desc limit 1) as followupNote from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by sID asc ",nativeQuery = true)
	List<String[]> getTicketDownloadData1(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);

	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.id as followupNote,t.corrective,t.preventive,t.root_cause,t.closure_comments,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataForSparsh(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,(select GROUP_CONCAT(IFNULL( REPLACE(tee.note,'\\n',''), ' ') , '~', IFNULL( (select user.first_name from itx_users user where user.id=tee.modified_by), ' ') ,'~', IFNULL( tee.modified_date, ' ') SEPARATOR '~' ) from itx_ticket_escalation tee where tee.ticketID=t.id and tee.note is not null and tee.note!='' order by `created_date` desc limit 1) as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataForFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.comments,fb.rating,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataForAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);

	
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.id as followupNote,t.corrective,t.preventive,t.root_cause,t.closure_comments,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataForSparsh(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,(select GROUP_CONCAT(IFNULL( REPLACE(tee.note,'\\n',''), ' ') , '~', IFNULL( (select user.first_name from itx_users user where user.id=tee.modified_by), ' ') ,'~', IFNULL( tee.modified_date, ' ') SEPARATOR '~' ) from itx_ticket_escalation tee where tee.ticketID=t.id and tee.note is not null and tee.note!='' order by `created_date` desc limit 1) as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataForFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.comments,fb.rating,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataForAoi(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,t.closed_by_date,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and fb.created_date>=:startDate and fb.created_date<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ", nativeQuery=true)
	List<String[]> getTicketDownloadDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,
			String filterStatus, String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,t.closed_by_date,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ", nativeQuery=true)
	List<String[]> getMyTicketDownloadDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,
			String filterStatus, String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,t.closed_by_date,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ", nativeQuery=true)
	List<String[]> getPendingTicketDownloadDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,
			String filterStatus, String filterUser, String factorNumber);
	
	
	
	@Query(value="select '0 to 3 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=3.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '3 to 6 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=3.01 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '6 to 12 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=6.01 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '12 to 24 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=12.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '24 to 48 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=24.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=48.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '48 to 72 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=48.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select 'More than 72 Hours',count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> prepareTatGraph1(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);
	
	@Query(value="select '0 to 3 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=3.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '3 to 6 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=3.01 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '6 to 12 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=6.01 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '12 to 24 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=12.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '24 to 48 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=24.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=48.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '48 to 72 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=48.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select 'More than 72 Hours',count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> prepareActualTatGraph1(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);

	
	@Query(value="select '0 to 3 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=3.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '3 to 6 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=3.01 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '6 to 12 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=6.01 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '12 to 24 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=12.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '24 to 48 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=24.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=48.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '48 to 72 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=48.1 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select 'More than 72 Hours',count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) >=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> prepareTatGraph1compare(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			 String branchID, String typeID, Integer channelID);
	
	@Query(value="select '0 to 3 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=3.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '3 to 6 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=3.01 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '6 to 12 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=6.01 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '12 to 24 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=12.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '24 to 48 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=24.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=48.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select '48 to 72 Hours', count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=48.1 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) union select 'More than 72 Hours',count(*) from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) >=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> prepareActualTatGraph1compare(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			 String branchID, String typeID, Integer channelID);

	
	@Query(value="select t.factor_name,'0 to 3 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600)  < 3.01  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name Union select t.factor_name,'3 to 6 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600)  > 3.01  and (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600) <= 6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'6 to 12 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600)  > 6.0 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) <= 12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'12 to 24 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) >12.0 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'24 to 48 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) >24.0 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) <=48 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'48 to 72 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) >48.0 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'More than 72 Hours',count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.closed_by_date, t.created_date)) / 3600) >72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name order by factNo",nativeQuery = true)
	List<String[]> prepareTatGraph2(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer  clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);
	
	@Query(value="select t.factor_name,'0 to 3 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600)  < 3.01  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name Union select t.factor_name,'3 to 6 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600)  > 3.01  and (time_to_sec(timediff(t.actual_closed_by_date,t.created_date)) / 3600) <= 6.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'6 to 12 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600)  > 6.0 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) <= 12.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'12 to 24 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) >12.0 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) <=24.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'24 to 48 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) >24.0 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) <=48 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'48 to 72 Hours', count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) >48.0 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) <=72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name union select t.factor_name,'More than 72 Hours',count(*),t.factor_number factNo from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by and t.closed_by !=0 and t.status=3 and (time_to_sec(timediff(t.actual_closed_by_date, t.created_date)) / 3600) >72.0 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and t.status=3 and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) group by factor_name order by factNo",nativeQuery = true)
	List<String[]> prepareActualTatGraph2(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer  clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);

	@Query(value="select (SELECT CONCAT((select branch_code from im_branch where id=u.branchID), '-',  t.ticket_number )) AS tktno, fb.name,fb.contact_no,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') as ticketCreatedDate ,DATE_FORMAT(t.closed_by_date, '%d-%m-%Y %H:%i:%s') as closed_by_date,(HOUR(TIMEDIFF(t.closed_by_date,t.created_date))) difference from itx_ticket t,ifb_feedback fb,itx_users u where u.id=fb.created_by and fb.id=t.feedbackID and t.closed_by !=0 and t.status=3 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and  (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> complaintTatData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);
	
	@Query(value="select (SELECT CONCAT((select branch_code from im_branch where id=u.branchID), '-',  t.ticket_number )) AS tktno, fb.name,fb.contact_no,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') as ticketCreatedDate ,DATE_FORMAT(t.actual_closed_by_date, '%d-%m-%Y %H:%i:%s') as actual_closed_by_date,(HOUR(TIMEDIFF(t.actual_closed_by_date,t.created_date))) difference from itx_ticket t,ifb_feedback fb,itx_users u where u.id=fb.created_by and fb.id=t.feedbackID and t.closed_by !=0 and t.status=3 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and  (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> complaintActualTatData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String factorNumber);
	
	@Query(value="select (SELECT CONCAT((select branch_code from im_branch where id=u.branchID), '-',  t.ticket_number )) AS tktno, fb.name,fb.contact_no,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') as ticketCreatedDate ,DATE_FORMAT(t.closed_by_date, '%d-%m-%Y %H:%i:%s') as closed_by_date,(HOUR(TIMEDIFF(t.closed_by_date,t.created_date))) difference from itx_ticket t,ifb_feedback fb,itx_users u where u.id=fb.created_by and fb.id=t.feedbackID and t.closed_by !=0 and t.status=3 and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and  (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)",nativeQuery = true)
	List<String[]> complaintTatData1(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID,
			String branchID, String typeID, Integer channelID, String factorNumber);
	
	@Query(value="select t.factor_name,count(*),t.factor_number from itx_ticket t,ifb_feedback fb,itx_users u where fb.id=t.feedbackID  and u.id=fb.created_by  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  group by t.factor_number",nativeQuery = true)
	List<String[]> piechart(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer  countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_1 ',count(*) from ifb_feedback fb,itx_users u where u.id=fb.created_by and ( _1=1 || _1=2 )  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_2 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _2=1 || _2=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_3 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _3=1 || _3=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_4 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _4=1 || _4=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_5 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _5=1 || _5=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_6 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _6=1 || _6=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_7 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _7=1 || _7=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_8 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _8=1 || _8=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_9 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _9=1 || _9=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_10 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _10=1 || _10=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_11 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _11=1 || _11=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_12 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _12=1 || _12=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_13 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _13=1 || _13=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_14 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _14=1 || _14=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_15 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _15=1 || _15=2 )and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_16 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _16=1 || _16=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_17 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _17=1 || _17=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_18 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _18=1 || _18=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_19 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_19=1 || _19=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_20 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _20=1 || _20=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_21 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _21=1 || _21=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_22 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _22=1 || _22=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_23 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _23=1 || _23=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_24 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _24=1 || _24=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_25 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _25=1 || _25=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_26 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _26=1 || _26=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_27 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _27=1 || _27=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_28 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _28=1 || _28=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_29 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _29=1 || _29=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_30 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _30=1 || _30=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_31 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _31=1 || _31=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_32 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _32=1 || _32=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_33 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _33=1 || _33=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_34 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _34=1 || _34=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_35 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _35=1 || _35=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_36 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _36=1 || _36=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_37 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _37=1 || _37=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_38 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _38=1 || _38=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_39 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _39=1 || _39=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_40 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _40=1 || _40=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_41 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _41=1 || _41=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_42 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _42=1 || _42=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_43 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _43=1 || _43=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_44 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _44=1 || _44=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_45 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _45=1 || _45=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_46 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _46=1 || _46=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_47 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _47=1 || _47=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_48 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _48=1 || _48=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_49 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _49=1 || _49=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_50 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _50=1 || _50=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_51 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _51=1 || _51=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_52 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _52=1 || _52=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_53 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _53=1 || _53=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_54 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _54=1 || _54=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_55 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _55=1 || _55=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_56 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _56=1 || _56=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_57 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _57=1 || _57=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_58 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _58=1 || _58=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_59 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _59=1 || _59=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_60 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _60=1 || _60=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_61 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _61=1 || _61=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_62 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _62=1 || _62=2) and fb.companyID=:companyID  and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_63 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _63=1 || _63=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_64 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _64=1 || _64=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_65 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _65=1 || _65=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_66 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _66=1 || _66=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_67 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _67=1 || _67=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> barchart(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value = "select '_1' ,count(*) from ifb_feedback fb,itx_users u where u.id=fb.created_by and ( _1=1 || _1=2 )  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_5' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _5=1 || _5=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_6' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _6=1 || _6=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_7 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _7=1 || _7=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ", nativeQuery = true)
	List<String[]> getReceptionIp112(LocalDateTime startDate,
			LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_8 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _8=1 || _8=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_15 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _15=1 || _15=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_16 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _16=1 || _16=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_17 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _17=1 || _17=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_18 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _18=1 || _18=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_19 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _19=1 || _19=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_20 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _20=1 || _20=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getRegistrationIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_21 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _21=1 || _21=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_25 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _25=1 || _25=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_26 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _26=1 || _26=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_27 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _27=1 || _27=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )\r\n" + 
			"",nativeQuery = true)
	List<String[]> getAdmissionIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_28 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _28=1 || _28=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_35 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _35=1 || _35=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_36 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _36=1 || _36=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_37 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_37=1 || _37=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_38 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _38=1 || _38=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_39 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _39=1 || _39=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_40 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_40=1 || _40=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getRoomIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value=" select '_41 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _41=1 || _41=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_47 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _47=1 || _47=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_48 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _48=1 || _48=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_49 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_49=1 || _49=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_50 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _50=1 || _50=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_51 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _51=1 || _51=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  \r\n" + 
			"",nativeQuery = true)
	List<String[]> getNursingServicesIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_52 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _52=1 || _52=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_58 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _58=1 || _58=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_59 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_59=1 || _59=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_60 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _60=1 || _60=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_61 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _61=1 || _61=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_62 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_62=1 || _62=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getAncillaryIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_63 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _63=1 || _63=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_68 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _68=1 || _68=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_69 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_69=1 || _69=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_70 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _70=1 || _70=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_71 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _71=1 || _71=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   ",nativeQuery = true)
	List<String[]> getDoctorsServicesIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_72 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _72=1 || _72=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_77 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _77=1 || _77=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_78 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_78=1 || _78=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_79 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _79=1 || _79=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_80 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_80=1 || _80=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getFoodandBeverageIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_81 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _81=1 || _81=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_86 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _86=1 || _86=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_87 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_87=1 || _87=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_88 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _88=1 || _88=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_89 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_89=1 || _89=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) \r\n" + 
			"",nativeQuery = true)
	List<String[]> getBillingandDischargeIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_90 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _90=1 || _90=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_95 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _95=1 || _95=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_96 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_96=1 || _96=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_97 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _97=1 || _97=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_98 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_98=1 || _98=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getPharmacyIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_99 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _99=1 || _99=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_103 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _103=1 || _103=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_104 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_104=1 || _104=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_105 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _105=1 || _105=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getSecurityServicesIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_106 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _106=1 || _106=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_109 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _109=1 || _109=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_110 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_110=1 || _110=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getFacilitiesandPublicAreasIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_66 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _66=1 || _66=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getRateServiceIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_67 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _67=1 || _67=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getreturnIp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_1 ',count(*) from ifb_feedback fb,itx_users u where u.id=fb.created_by and ( _1=1 || _1=2 )  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_2 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _2=1 || _2=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_3 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _3=1 || _3=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_4 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _4=1 || _4=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_5 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _5=1 || _5=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_6 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _6=1 || _6=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_7 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _7=1 || _7=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_8 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _8=1 || _8=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_9 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _9=1 || _9=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_10 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _10=1 || _10=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_11 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _11=1 || _11=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_12 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _12=1 || _12=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_13 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _13=1 || _13=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_14 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _14=1 || _14=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_15 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _15=1 || _15=2 )and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_16 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _16=1 || _16=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_17 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _17=1 || _17=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_18 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _18=1 || _18=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_19 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_19=1 || _19=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_20 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _20=1 || _20=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_21 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _21=1 || _21=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_22 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _22=1 || _22=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_23 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _23=1 || _23=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_24 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _24=1 || _24=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  \r\n" + 
			"union select '_25 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _25=1 || _25=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_26 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _26=1 || _26=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_27 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _27=1 || _27=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_28 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _28=1 || _28=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_29 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _29=1 || _29=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_30 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _30=1 || _30=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_31 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _31=1 || _31=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_32 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _32=1 || _32=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_33 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _33=1 || _33=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_34 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _34=1 || _34=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_35 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _35=1 || _35=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_36 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _36=1 || _36=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_37 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _37=1 || _37=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_38 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _38=1 || _38=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_39 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _39=1 || _39=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_40 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _40=1 || _40=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_41 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _41=1 || _41=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_42 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _42=1 || _42=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_43 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _43=1 || _43=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_44 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _44=1 || _44=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_45 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _45=1 || _45=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_46 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _46=1 || _46=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_47 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _47=1 || _47=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_48 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _48=1 || _48=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_49 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _49=1 || _49=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_50 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _50=1 || _50=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_51 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _51=1 || _51=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_52 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _52=1 || _52=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_53 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _53=1 || _53=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_54 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _54=1 || _54=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_55 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _55=1 || _55=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_56 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _56=1 || _56=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_57 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _57=1 || _57=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_58 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _58=1 || _58=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_59 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _59=1 || _59=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_60 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _60=1 || _60=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> barchartOP(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_1 ',count(*) from ifb_feedback fb,itx_users u where u.id=fb.created_by and ( _1=1 || _1=2 )  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_2 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _2=1 || _2=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_3 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _3=1 || _3=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_4 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _4=1 || _4=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_5 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _5=1 || _5=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getReceptionOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_6 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _6=1 || _6=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_7 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _7=1 || _7=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_8 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _8=1 || _8=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_9 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _9=1 || _9=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_10 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _10=1 || _10=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getRegistrationOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_11 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _11=1 || _11=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_12 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _12=1 || _12=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_13 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _13=1 || _13=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_14 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _14=1 || _14=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_15 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _15=1 || _15=2 )and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getAdmissionOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_16 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  ( _16=1 || _16=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_17 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _17=1 || _17=2 ) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_18 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _18=1 || _18=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_19 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and  (_19=1 || _19=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_20 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _20=1 || _20=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getRoomOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_21 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _21=1 || _21=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_22 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _22=1 || _22=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_23 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _23=1 || _23=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_24 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _24=1 || _24=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_25 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _25=1 || _25=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_26 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _26=1 || _26=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getNursingServicesOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_27 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _27=1 || _27=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_28 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _28=1 || _28=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_29 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _29=1 || _29=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_30 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _30=1 || _30=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_31 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _31=1 || _31=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getAncillaryOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_32 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _32=1 || _32=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_33 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _33=1 || _33=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_34 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _34=1 || _34=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_35 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _35=1 || _35=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_36 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _36=1 || _36=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_37 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _37=1 || _37=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getDoctorsServicesOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value=" select '_38 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _38=1 || _38=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   union select '_39 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _39=1 || _39=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_40 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _40=1 || _40=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_41 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _41=1 || _41=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_42 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _42=1 || _42=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  ",nativeQuery = true)
	List<String[]> getFoodandBeverageOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_43 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _43=1 || _43=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_44 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _44=1 || _44=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_45 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _45=1 || _45=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_46 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _46=1 || _46=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_47 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _47=1 || _47=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getBillingandDischargeOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);
	
	@Query(value=" select '_48 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _48=1 || _48=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_49 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _49=1 || _49=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_50 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _50=1 || _50=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union select '_51 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _51=1 || _51=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getPharmacyOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_52 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _52=1 || _52=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_53 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _53=1 || _53=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_54 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _54=1 || _54=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_55 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _55=1 || _55=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_56 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _56=1 || _56=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_57 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _57=1 || _57=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  union select '_58 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _58=1 || _58=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getSecurityServicesOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_59 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _59=1 || _59=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getFacilitiesandPublicAreasOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID);

	@Query(value="select '_60 ',count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and ( _60=1 || _60=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp112(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select (time_to_sec(timediff(t.closed_by_date,t.created_date)) / 3600)   from ifb_feedback fb,itx_ticket t,itx_users u where t.feedbackid=fb.id and u.id=fb.created_by  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and t.status=3 and t.closed_by_date is not null",nativeQuery = true)
	List<Float> prepareSummaryTat(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select  DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s'),fb.name,fb.contact_no,fb.type,t.feedback_comments,fb.comments,psi_rating,(select c.name from channel c where c.id=fb.channelid) as channel, (select u.username from itx_users u where u.id=t.escalationid) assignedTo,(select ts.name from im_ticket_status ts where ts.id=t.status) status from ifb_feedback fb,itx_ticket t where fb.id=t.feedbackID  and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  order by fb.created_date desc",nativeQuery = true)
	List<String[]> reportComplaintData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select t.id,concat((select b.branch_code from im_branch b where b.id=fb.branchid),'-',t.ticket_number) tktNo , DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') date,fb.name,fb.contact_no,t.feedback_comments,fb.comments,t.status,(select u.username from itx_users u where u.id=t.escalationid) assignTo ,  te.note  deptNote,t.branchID,t.feedbackid from  ifb_feedback fb,itx_ticket t,itx_ticket_escalation te where fb.id=t.feedbackid and t.id=te.ticketid and te.escalationid=:userID and t.id=:tktId and fb.companyid=:companyID",nativeQuery = true)
	List<String[]> ticketResolutionDataVal(String companyID, String tktId, String userID);

	@Query(value="select t.id,concat((select branch_code from im_branch b where b.id=t.branchID),'-',t.ticket_number ) ,(select ts.name from im_ticket_status ts where ts.id=t.status),t.feedback_comments from itx_ticket t where t.feedbackid=:id",nativeQuery = true)
	List<String[]> ticketData(Integer id);

	@Query(value="select  '_1' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _1=1 || _1=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_2' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _2=1 || _2=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) ",nativeQuery = true)
	List<String[]> getRateIp115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value=" select  '_3' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _3=1 || _3=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_4' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _4=1 || _4=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_5' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _5=1 || _5=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp2115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value=" select  '_6' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _6=1 || _6=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_7' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _7=1 || _7=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_8' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _8=1 || _8=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_9' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _9=1 || _9=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_10' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _10=1 || _10=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_11' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _11=1 || _11=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_12' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _12=1 || _12=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp3115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select  '_13' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _13=1 || _13=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_14' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _14=1 || _14=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_15' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _15=1 || _15=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_16' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _16=1 || _16=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_17' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _17=1 || _17=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_18' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _18=1 || _18=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp4115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	
	@Query(value="select  '_19' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _19=1 || _19=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_20' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _20=1 || _20=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_21' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _21=1 || _21=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_22' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _22=1 || _22=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp5115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select  '_23' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _23=1 || _23=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_24' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _24=1 || _24=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_25' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _25=1 || _25=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_26' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _26=1 || _26=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp6115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	
	@Query(value="select  '_27' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _27=1 || _27=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_28' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _28=1 || _28=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_29' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _29=1 || _29=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_30' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _30=1 || _30=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp7115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="  select '_31' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _31=1 || _31) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select '_31' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _31=1 || _31) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp8115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select  '_32' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _32=1 || _32=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_33' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _33=1 || _33=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_34' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _34=1 || _34=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp9115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select  '_35' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _35=1 || _35=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_36' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _36=1 || _36=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateIp10115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	
	
	@Query(value="select  '_1' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _1=1 || _1=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_2' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _2=1 || _2=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_3' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _3=1 || _3=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_4' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _4=1 || _4=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_5' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _5=1 || _5=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_6' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _6=1 || _6=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp1115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	@Query(value="select  '_7' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _7=1 || _7=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_8' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _8=1 || _8=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_9' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _9=1 || _9=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp2115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	@Query(value="select  '_10' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _10=1 || _10=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_11' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _11=1 || _11=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_12' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _12=1 || _12=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp3115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	@Query(value="select  '_13' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _13=1 || _13=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_14' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _14=1 || _14=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_15' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _15=1 || _15=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp4115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	@Query(value="select  '_16' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _16=1 || _16=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_17' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _17=1 || _17=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_18' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _18=1 || _18=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp5115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	@Query(value="select  '_19' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _19=1 || _19=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_20' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _20=1 || _20=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) union  select  '_21' ,count(*) from ifb_feedback fb,itx_users u  where  u.id=fb.created_by and (  _21=1 || _21=2) and fb.companyID=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	List<String[]> getRateOp6115(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);
	
	@Query(value="select ward_no,count(*) from ifb_feedback fb,itx_ticket t,itx_users u where t.feedbackid=fb.id and u.id=fb.created_by  and ward_no is not null and ward_no!='' and ward_no!='Select Ward' and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) group by ward_no ",nativeQuery = true)
	List<String[]> wardTicket(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="SELECT (select b.name from im_branch b where b.id=fb.branchID) as branchName,(SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,t.feedback_comments,(select u.first_name from itx_users u where u .id=ts.escalationid) AssignedTo,concat((select tss.name from im_ticket_status tss where tss.id=ts.status) ,if(t.closed_internally=1,'- Closed Internally',''))as status,ts.ccm_note,ts.ccm1_note,ts.ccm2_note, ts.followup_note,ts.om_qm_note,ts.closure_comments,ts.gm_note,ts.preventive,ts.root_cause, DATE_FORMAT(ts.update_date, '%d-%m-%Y %H:%i:%s') updatedDate,(select u.first_name from itx_users u where u .id=ts.update_by) updatedBy,if((select count(*) from itx_ticket_escalation te where te.ticketid=t.id and te.attachment=1)>0,'YES','NO') attachment from ifb_feedback fb,itx_users u , itx_ticket t,itx_ticket_status_logs ts where t.feedbackID=fb.id and fb.created_by=u.id and ts.ticketid=t.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber)order by fb.created_date desc",nativeQuery = true)
	List<String[]> getTicketDownloadBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,(select GROUP_CONCAT(IFNULL( REPLACE(tee.note,'\\n',''), ' ') , '~', IFNULL( (select user.first_name from itx_users user where user.id=tee.modified_by), ' ') ,'~', IFNULL( tee.modified_date, ' ') SEPARATOR '~' ) from itx_ticket_escalation tee where tee.ticketID=t.id and note is not null order by `created_date` desc limit 1) as followupNote,t.corrective,t.preventive,t.callcenter,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadRubyHall(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);

	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.id as ticketID,t.corrective,t.preventive,t.root_cause,t.closure_comments,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadSparsh(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);

//	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.comments,(IFNULL(ELT(FIELD(fb.rating,'-1'),'NA'), fb.rating)),(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	
	List<String[]> getTicketDownloadFernandez(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, String filterStatus,
			String filterUser, String factorNumber);	
	
	@Query(value="SELECT (select b.name from im_branch b where b.id=fb.branchID) as branchName,(SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,t.feedback_comments,(select u.first_name from itx_users u where u .id=ts.escalationid) AssignedTo,concat((select tss.name from im_ticket_status tss where tss.id=ts.status) ,if(t.closed_internally=1,'- Closed Internally',''))as status,ts.ccm_note,ts.ccm1_note,ts.ccm2_note, ts.followup_note,ts.om_qm_note,ts.closure_comments,  DATE_FORMAT(ts.update_date, '%d-%m-%Y %H:%i:%s') updatedDate,(select u.first_name from itx_users u where u .id=ts.update_by) updatedBy,if((select count(*) from itx_ticket_escalation tee where tee.ticketid=t.id and tee.attachment=1)>0,'YES','NO') attachment from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,itx_ticket_status_logs ts , itx_users u where u.id=u.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and ts.ticketid=t.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by fb.created_date desc   ",nativeQuery = true)
	List<String[]> getMyTicketDownloadBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="SELECT (select b.name from im_branch b where b.id=fb.branchID) as branchName,(SELECT CONCAT(DATE_FORMAT(fb.created_date, '%y%m'), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,t.feedback_comments,(select u.first_name from itx_users u where u .id=ts.escalationid) AssignedTo,concat((select tss.name from im_ticket_status tss where tss.id=ts.status) ,if(t.closed_internally=1,'- Closed Internally',''))as status,ts.ccm_note,ts.ccm1_note,ts.ccm2_note,  ts.followup_note,ts.om_qm_note,ts.closure_comments,  DATE_FORMAT(ts.update_date, '%d-%m-%Y %H:%i:%s') updatedDate,(select u.first_name from itx_users u where u .id=ts.update_by) updatedBy,if((select count(*) from itx_ticket_escalation tee where tee.ticketid=t.id and tee.attachment=1)>0,'YES','NO') attachment from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,itx_ticket_status_logs ts , itx_users u where u.id=u.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and ts.ticketid=t.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by fb.created_date desc   ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadBaptist(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer  clusterID,
			 Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus,
			String filterUser, String factorNumber);
	
	@Query(value="select concat((select b.branch_code from im_branch b where b.id=t.branchid),'-',ticket_number) tktNo from itx_ticket t where t.feedbackid=:feedbacID and t.companyid=:companyID",nativeQuery = true)
	List<String> mulTicketResolutionDataVal(String companyID, String feedbacID);

	
	@Query(value="SELECT escalationid FROM itx_ticket_escalation where ticketid=:id order by id desc limit 1",nativeQuery = true)
	int getescalation(int id);

	@Query(value="select factor_name ,count(*) from itx_ticket t, ifb_feedback fb ,itx_users u where fb.id=t.feedbackid and fb.created_by=u.id  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) group by factor_name",nativeQuery = true)
	List<String[]> prepareServiceCount(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select fb.id,t.id as tikId, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number ))  AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,  (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,fb.type,te.note    from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus)  order by fb.created_date desc",nativeQuery = true)
	List<String[]> mMyTicket(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus);

	@Query(value="select fb.id,t.id as tikId, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number ))  AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,  (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,fb.type,te.note     from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) order by fb.created_date desc",nativeQuery = true)
	List<String[]> mPendingTicket(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID, String filterStatus);

	@Query(value="select t.factor_name,count(*) from ifb_feedback fb,itx_ticket t, itx_users u where fb.created_by=u.id and fb.id=t.feedbackID and factor_name is not null and factor_name!='' and fb.companyID=:companyID and (:countryID is null or :countryID='' or u.countryID=:countryID)  and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID )  and (:branchID is null or :branchID='' or u.branchID=:branchID) and (:typeID is null or :typeID='' or fb.type=:typeID)  and (:channelID is null or :channelID='' or fb.channelID=:channelID) and t.closed_by !=0 and t.status=3 and fb.created_date >=:startDate and  fb.created_date <=:endDate   group by t.factor_name order by t.factor_name",nativeQuery = true)
	List<String[]> prepareTat(Integer companyID, Integer countryID, Integer clusterID, Integer branchID,
			LocalDateTime startDate, LocalDateTime endDate, Integer channelID, String typeID);

	@Query(value="select factor_name ,status,count(*),factor_number from itx_ticket t, ifb_feedback fb ,itx_users u where fb.id=t.feedbackid and fb.created_by=u.id  and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) group by factor_name,status order by factor_number,status",nativeQuery = true)
	List<String[]> prepareTicketStatus(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select t.id,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) ,t.feedback_comments,t.status,fb.name,fb.ref_no,fb.contact_no,t.factor_name,t.factor_number,fb.created_date,fb.floor_no,fb.ward_no,fb.type,fb.comments,t.dep_note from ifb_feedback fb,itx_ticket t,itx_users u where u.id=fb.created_by and fb.id=t.feedbackid and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and  (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:ticketNumber is null || :ticketNumber='' || t.ticket_number=:ticketNumber) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by t.created_date desc;",nativeQuery = true)
	List<String[]> mSearchPatient(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID, String filterStatus,
			String factorNumber, String ticketNumber);

	@Query(value="select tee.ticketid,tee.note,(select user.first_name from itx_users user where user.id=tee.modified_by),tee.modified_date from itx_ticket_escalation tee where tee.ticketID in (:keySet) and tee.note is not null and tee.note !='' order by `created_date` desc",nativeQuery = true)
	List<String[]> preapreFolloup(Set<String> keySet);

	@Query(value="select (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) tktNo,DATE_FORMAT(t.created_date, '%d-%m-%Y'),fb.name,fb.ref_no,fb.contact_no,fb.type,t.feedback_comments,fb.comments, (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select c.name from channel c where c.id=fb.channelID) from ifb_feedback fb,itx_ticket t where fb.id=t.feedbackid and fb.companyid=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:status is  null || :status='' || t.status!=:status) and (:branchID is  null || :branchID='' || t.branchID=:branchID) and (:typeID is null || :typeID='' || fb.type=:typeID ) ",nativeQuery = true)
	List<List<String>> complaintData(int companyID, LocalDateTime startDate, LocalDateTime endDate, Integer status, Integer branchID, String typeID);

	@Query(value="select t.feedbackid,CONCAT((select branch_code from im_branch where id=t.branchID), '-',  t.ticket_number ),t.feedback_comments,(select ts.name from im_ticket_status ts where ts.id=t.status),if(t.escalationid=0,'',(select u.first_name from itx_users u where u.id=t.escalationid)) from itx_ticket t where t.companyid=:companyID and  t.created_date>=:startDate and t.created_date<=:endDate and (:branchID is null || :branchID='' || t.branchID=:branchID ) and (:typeID is null || :typeID='' || t.type=:typeID ) order by t.feedbackid",nativeQuery = true)
	List<List<String>> rubyHallTicketData(LocalDateTime startDate, LocalDateTime endDate, int companyID, Integer branchID,
			String typeID);
	
	@Query(value="select if(sub_factor_number=0,factor_number,sub_factor_number) as fid,if(sub_factor_number=0,factor_name,sub_factor_name),fb.ward_no,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) tktNo,DATE_FORMAT(t.created_date, '%d-%m-%Y'),fb.name,fb.ref_no,fb.contact_no,fb.type,t.feedback_comments,fb.comments, (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select c.name from channel c where c.id=fb.channelID) from ifb_feedback fb,itx_ticket t where fb.id=t.feedbackid and fb.companyid=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate  order by fid",nativeQuery = true)
	List<List<String>> officerComplaintData(int companyID, LocalDateTime startDate, LocalDateTime endDate);
	
	@Query(value="select (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) tktNo,DATE_FORMAT(t.created_date, '%d-%m-%Y'),fb.name,fb.ref_no,fb.contact_no,fb.type,(IFNULL(ELT(FIELD(fb.`rating`,-1  ),'NA'), fb.`rating`)),fb.comments,t.feedback_comments,t.audio_comments, (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select c.name from channel c where c.id=fb.channelID) from ifb_feedback fb,itx_ticket t where fb.id=t.feedbackid and fb.companyid=:companyID and fb.created_date>=:startDate and fb.created_date<=:endDate and (:status is  null || :status='' || t.status!=:status) and (:branchID is  null || :branchID='' || t.branchID=:branchID) and (:typeID is null || :typeID='' || fb.type=:typeID ) ",nativeQuery = true)
	List<List<String>> complaintDataList(int companyID, LocalDateTime startDate, LocalDateTime endDate, Integer status, Integer branchID, String typeID);

	@Query(value="select t.id,t.escalationID,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) tktNo ,fb.contact_no,fb.ref_no,fb.name,DATE_FORMAT(t.created_date, '%d-%m-%Y'),t.feedback_comments from ifb_feedback fb,itx_ticket t,itx_users u where fb.id=t.feedbackid and fb.created_by=u.id and t.level=0 and t.auto_escalation=0 and  (select timestampdiff(Minute, t.created_date,CONVERT_TZ(now(),'+00:00','+00:00')) )>=:time and t.companyID=:companyID and (:countryID=null || :countryID='' || u.countryid=:countryID) ",nativeQuery = true)
	List<String[]> reminderList(Integer companyID, Integer countryID, Integer time);

	Ticket findByIdAndCompanyID(int parseInt, Integer companyID);

	@Query(value="select u.countryID from itx_ticket t ,itx_users u where  t.escalationID=u.id and t.id=:id",nativeQuery = true)
	Integer getCountryId(int id);

	@Query(value="Select distinct  t.id,t.ticket_Number,(select distinct userid from itx_user_ticket_map u where u.drilldownid=if(is_sub_ticket=0,t.factor_Number,t.sub_factor_number) and u.level=:userMapLevel and u.branchID=t.branchID and u.form_type=fb.type and u.ward_name=if((select ward_ticket from im_factor_questions fq where fq.id=if(is_sub_ticket=0,t.factor_Number,t.sub_factor_number))=1,fb.ward_no,'')),t.escalationID,t.status,t.feedback_comments,t.created_date,fb.name,fb.contact_No,fb.ref_no,fb.channelID,t.branchID,(select branch_code from im_branch b where b.id=t.branchID),fb.comments,fb.type,(select level:level from itx_service_tat st where st.companyid=:companyID and st.branchid=0 and st.priority=(select priority from itx_service_priority sp where sp.serviceid=if(t.is_sub_ticket=0,t.factor_Number,t.sub_factor_number))) from itx_ticket t , itx_ticket_escalation te ,ifb_feedback fb where  fb.id=feedbackID and te.ticketID=t.id and fb.companyID=:companyID  and  t.status!=3  and (select timestampdiff(Minute, te.created_date,CONVERT_TZ(now(),'+00:00','+05:30')) )>=(select level:level from itx_service_tat st where st.companyid=:companyID and st.branchid=0 and st.priority=(select priority from itx_service_priority sp where sp.serviceid=if(t.is_sub_ticket=0,t.factor_Number,t.sub_factor_number)))  and   te.level=:level and t.auto_escalation=:level and date(t.created_date)>='2022-02-28'",nativeQuery = true)
	List<String[]> pullAutoEscalation(Integer companyID, Integer level, int userMapLevel);

	@Query(value="SELECT (select b.name from im_branch b where b.id=usr.branchID),(SELECT CONCAT((select imb.branch_code from im_branch imb where imb.id = usr.branchID), '-', t.ticket_number)) AS tktno ,DATE_FORMAT(fb.created_date, '%d-%m-%Y %h:%i %p')  as date_dmy,fb.ref_no,fb.name,fb.room_no,fc.comment46,(select name from im_ticket_status ts where ts.id=t.status),t.note,(SELECT first_name from itx_users u where u.id=t.escalationID), t.feedback_comments,(SELECT  GROUP_CONCAT(note,\" - \",created_date SEPARATOR '| ') FROM itx_ticket_escalation te where te.ticketID=t.id GROUP BY te.ticketID ),t.corrective,t.pcm_data,t.closed_by_date from ifb_feedback fb,itx_ticket t,itx_users usr,ifb_feedback_comments fc where fb.created_by=usr.id and fb.ID=t.feedbackID and fc.feedbackID=fb.id and fb.companyID =:companyID  and DATE(fb.created_date) < DATE(NOW()) and DATE(fb.created_date) >= DATE(DATE_SUB(NOW(),INTERVAL 1 MONTH)) and usr.countryID=:countryID  and t.sub_factor_number=105 and fb.type='IP' order by fb.created_date,usr.branchID desc",nativeQuery = true)
	List<String[]> caComplaintData(int companyID, int countryID);
	//for ticket count trend analysis 
	@Query(value="select count(*) from ifb_feedback fb, itx_ticket t , itx_users u where t.factor_name=:serviceName and u.id=fb.created_by and t.feedbackid=fb.id and t.created_date>=:startDate and t.created_date<:endDate and t.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID )  and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || t.branchID=:branchID ) and (:typeID is null || :typeID='' || t.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	Integer getCountOfTicket(LocalDate startDate, LocalDate endDate, Integer companyID, Integer countryID,Integer clusterID,Integer branchID, String typeID, Integer channelID,String serviceName);
	//@Query(value="select * from im_factor_questions f where f.commpanyid=:companyID and (:type is null || :type='' || f.type=:type)  and f.is_header=1   order by f.type, f.sequence",nativeQuery = true)
	//List<FactorName> getFactorByHeaderAll(String type,Integer companyID);
	
	@Query(value="select count(*) from ifb_feedback fb, itx_ticket t , itx_users u where t.factor_name=:serviceName and u.id=fb.created_by and t.feedbackid=fb.id and t.created_date>=:startDate and t.created_date<:endDate and t.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID )  and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || t.branchID=:branchID ) and (:typeID is null || :typeID='' || t.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	Integer getCountOfAoiTicket(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,Integer clusterID,Integer branchID, String typeID, Integer channelID,String serviceName);
	
	@Query(value="select count(*) from ifb_feedback fb,im_factor_questions fq, itx_ticket t , itx_users u where t.factor_name=:serviceName and u.id=fb.created_by and t.feedbackid=fb.id and t.created_date>=:startDate and t.created_date<:endDate and t.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID )  and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || t.branchID=:branchID ) and  (:channelID is null || :channelID='' || fb.channelID=:channelID )",nativeQuery = true)
	Integer getCountOfTicketForOei(LocalDate startDate, LocalDate endDate, Integer companyID, Integer countryID,Integer clusterID,Integer branchID, Integer channelID,String serviceName);
	
	//@Query(value="select * from im_factor_questions f where f.commpanyid=:companyID and (:type is null || :type='' || f.type=:type)  and f.is_header=1 and   factor_name !='RECOMMENDATION' order by f.type, f.sequence",nativeQuery = true)
//	List<FactorName> getFactorByHeaderAll(String type,Integer companyID);
	
	
	@Query(value = "select 'Overall',imp_val1,count(*) from ifb_feedback fb, itx_users u where u.id=fb.created_by and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and imp_val1!=0  group by imp_val1 union select 'Staff', imp_val2,count(*) from ifb_feedback fb, itx_users u where u.id=fb.created_by and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and imp_val2!=0  group by imp_val2 union select 'Facility', imp_val3,count(*) from ifb_feedback fb, itx_users u where u.id=fb.created_by and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and imp_val3!=0 group by imp_val3 union select 'Patient Care', imp_val4,count(*) from ifb_feedback fb, itx_users u where u.id=fb.created_by and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and imp_val4!=0 group by imp_val4 union select 'Treatment', imp_val5,count(*) from ifb_feedback fb, itx_users u where u.id=fb.created_by and fb.created_date>=:startDate and fb.created_date<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and imp_val5!=0  group by imp_val5", nativeQuery = true)
	List<String[]> forPoorCount(LocalDate startDate, LocalDate endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID);
     @Query(value = "select * from itx_ticket t where t.companyid=:companyID and t.id=:ticketNo", nativeQuery = true)
	Ticket findByTicketNoAndCompanyID( Integer companyID,Integer ticketNo);

 	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(select name from im_branch where id=fb.branchID),(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.ref_no,fb.name,fb.contact_no,fb.type,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.pcm_data,t.corrective from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and fb.created_date>=:startDate and fb.created_date<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
 	List<String[]> getTicketDownloadDataCont(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
 			 Integer branchID, String typeID, Integer channelID, String filterStatus,
 			String filterUser, String factorNumber);
    @Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadDataCMS(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,String filterStatus, String filterUser, String factorNumber);
	
	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataCMS(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataCMS(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
    List<String[]> getTicketDownloadDataWdl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,
			String filterStatus, String filterUser, String factorNumber);
  
    @Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataWdl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,t.preventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataWdl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);

    @Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,concat(t.corrective,' ',t.preventive) as CorrectivePreventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
    List<String[]> getTicketDownloadDataSKR(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,concat(t.corrective,' ',t.preventive) as CorrectivePreventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName  from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getMyTicketDownloadDataSKR(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT @sl\\:=@sl+1 as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,concat(t.corrective,'  ',t.preventive) as CorrectivePreventive,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id  and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by S_No asc ",nativeQuery = true)
	List<String[]> getPendingTicketDownloadDataSKR(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,String filterStatus, String filterUser, String factorNumber);
	
	 @Query(value="select fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)), (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by)  closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective ,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause, fb.ipno, t.feedbackid ,t.nonclinical_dept,t.sub_deptid, t.category, t.priority,t.sub_category,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),t.actual_closed_by_date,t.file_path from ifb_feedback fb, itx_ticket t,itx_users u where u.id=fb.created_by and t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterID=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and if(:subbService=0,(:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber),(:factorNumber is null || :factorNumber='' || t.sub_factor_number=:factorNumber)) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
		List<String[]> findCompiantDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,Integer countryID,Integer clusterID,
				 Integer branchID, String typeID, Integer channelID, Integer page1, Integer page2,String filterStatus, String filterUser, String factorNumber, String name, String refNo, String ticketNo, String ipno, String subbService);
		
	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,fb.ipno, t.feedbackid ,t.nonclinical_dept,t.sub_deptid,t.category,t.priority,t.sub_category,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),t.actual_closed_by_date,t.file_path from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findMyCompiantDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer page1,
			Integer page2, Integer userID, String filterStatus, String filterUser, String factorNumber, String name,
			String refNo, String ticketNo, String ipno);

	@Query(value="select distinct fb.id, (SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(fb.created_date, '%d-%m-%Y %H:%i:%s') createdDate, fb.name,fb.ref_no,fb.contact_no,fb.email,(select name from im_branch b where b.id=fb.branchID) branchname, (IFNULL(ELT(FIELD(fb.rating,'-1'),'NA '), fb.rating)) , (select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') ticketDate , (select u.first_name from itx_users u where u .id=t.closed_by) closedBy,t.feedback_comments,fb.comments,t.status,t.id as ticketidno,t.note as ccm ,t.pcm_data,t.corrective,t.closed_internally ,fb.audiance_type ,fb.deptid,fb.ward_no ,fb.type, fb.bed_no ,fb.room_no ,  t.preventive , t.callcenter  , fb.opd_name,t.factor_number,t.root_cause,fb.ipno, t.feedbackid , t.nonclinical_dept,t.sub_deptid,t.category,t.priority,t.sub_category,(select p.name as priority_name from im_priority p where p.id=t.priority), (select c.name as category_name from im_category c where c.id=t.category), (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),t.actual_closed_by_date,t.file_path from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te ,itx_users u where u.id=fb.created_by and  t.id=te.ticketid and t.feedbackid=fb.id  and fb.created_date>=:startDate and fb.created_date<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )  and te.escalationid=:userID and t.status!=3  and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and (:name is null || :name='' || fb.name like %:name% ) and (:refNo is null || :refNo='' || fb.ref_no=:refNo ) and (:ticketNo is null || :ticketNo ='' || t.ticket_number=:ticketNo) and (:ipno is null || :ipno ='' || fb.ipno=:ipno) order by tktno desc,t.id desc limit :page1,:page2",nativeQuery = true)
	List<String[]> findPendingCompiantDataMPH(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer page1,
			Integer page2, Integer userID, String filterStatus, String filterUser, String factorNumber, String refNo,
			String name, String ticketNo, String ipno);

	@Query(value="SELECT t.factor_name ,t.is_sub_ticket,count(t.is_sub_ticket) FROM itx_ticket t,ifb_feedback f where t.created_date>=:startDate and t.created_date<=:endDate and t.companyid=:companyID and (:branchID is null || :branchID='' || t.branchid=:branchID ) and (:typeID is null || :typeID='' ||t.type=:typeID )and f.id=t.feedbackid and (:channelID is null || :channelID='' || f.channelid=:channelID)  group by t.factor_name,t.is_sub_ticket order by t.factor_name",nativeQuery = true)
	List<String[]> getMisclassificationCountData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer branchID, String typeID, Integer channelID);

	@Query(value="select (select p.name as priority_name from im_priority p where p.id=t.priority),count(*) from itx_ticket t, itx_users u,ifb_feedback fb where u.id=fb.created_by and t.feedbackid=fb.id and Date(t.created_date)>=:startDate and Date(t.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchid=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   group by t.priority order by t.priority", nativeQuery = true)
	List<String[]> priorityChart(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select (select c.name as category_name from im_category c where c.id=t.category),count(*),t.category from itx_ticket t, itx_users u,ifb_feedback fb where u.id=fb.created_by and t.feedbackid=fb.id and Date(t.created_date)>=:startDate and Date(t.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchid=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   group by t.category order by t.category", nativeQuery = true)
	List<String[]> categoryChart(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID);

	@Query(value="select (select sc.name as subcategory_name from im_category sc where sc.id=t.sub_category),count(*) from itx_ticket t, itx_users u,ifb_feedback fb  where u.id=fb.created_by and t.feedbackid=fb.id and t.sub_category in(select id from im_category where parentid=:categoryName) and Date(t.created_date)>=:startDate and Date(t.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchid=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )   group by t.sub_category order by t.sub_category", nativeQuery = true)
	List<String[]> subCategoryData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID, String categoryName);
	
	@Query(value="select (select c.name from im_category c where t.category=c.id) as cname, t.priority, count(*) from itx_ticket t,itx_users u,ifb_feedback fb where u.id=fb.created_by and t.feedbackid=fb.id and Date(t.created_date)>=:startDate and Date(t.created_date)<=:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchid=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) group by cname, t.priority order by cname, t.priority", nativeQuery = true) 
	List<String[]> getcategoryPriorityData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer countryID,
			Integer clusterID, Integer branchID, String typeID, Integer channelID);
	
	@Query(value = "SELECT tk.id,(SELECT CONCAT((select bh.branch_code from im_branch bh where id=tk.branchid), '-',tk.ticket_number )),(select ca.name from im_category ca where id=tk.category),(select pa.name from im_priority pa where id=tk.priority),tk.status,tk.time_taken,tk.note1,tk.created_date,tk.type FROM itx_ticket tk where tk.created_date>=:startDate and tk.created_date<=:endDate and tk.companyID=:companyID   and (:branchID is null || :branchID='' || tk.branchid=:branchID ) and (:typeID is null || :typeID='' || tk.type=:typeID ) and (:priority is null || :priority='' || tk.priority=:priority) and (:category is null || :category='' || tk.category=:category) order by tk.id desc",nativeQuery = true)
	List<String[]> getTicketData(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer branchID,
			 String typeID, String priority, String category);

	@Query(value = "SELECT sum(time_taken) FROM itx_ticket tk where tk.created_date>=:startDate and tk.created_date<=:endDate and tk.companyID=:companyID   and (:branchID is null || :branchID='' || tk.branchid=:branchID ) and (:typeID is null || :typeID='' || tk.type=:typeID ) and (:priority is null || :priority='' || tk.priority=:priority) and (:category is null || :category='' || tk.category=:category)",nativeQuery = true)
	Integer getFinLoss(LocalDateTime startDate, LocalDateTime endDate, Integer companyID, Integer branchID,
			String typeID , String priority, String category);

	@Query(value="SELECT DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,fb.type,fb.ref_no,fb.name,fb.contact_no,(IFNULL(ELT(FIELD(fb.rating,'-1'),'NA'), fb.rating)),fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,(SELECT u.first_name from itx_users u where u.id=t.closed_by),t.closed_by_date, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by t.created_date desc ", nativeQuery=true)
	List<String[]> getTicketDownloadDataGlbl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,
			String filterStatus, String filterUser, String factorNumber);
	
	@Query(value="SELECT DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,fb.type,fb.ref_no,fb.name,fb.contact_no,(IFNULL(ELT(FIELD(fb.rating,'-1'),'NA'), fb.rating)),fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,t.closed_by,t.closed_by_date, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,(select @sl\\:=0) as sl,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by t.created_date desc ", nativeQuery=true)
	List<String[]> getMyTicketDownloadDataGlbl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,
			String filterStatus, String filterUser, String factorNumber);
	
	@Query(value="SELECT DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-', t.ticket_number )) AS tktno,fb.type,fb.ref_no,fb.name,fb.contact_no,(IFNULL(ELT(FIELD(fb.rating,'-1'),'NA'), fb.rating)),fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo,t.closed_by,t.closed_by_date, t.feedback_comments,t.note,t.dep_note as followupNote,t.corrective,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb, itx_ticket t,itx_ticket_escalation te,itx_users u where u.id=fb.created_by and t.id=te.ticketid and t.feedbackid=fb.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID ) and te.escalationid=:userID and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) and t.status!=3 order by t.created_date desc", nativeQuery=true)
	List<String[]> getPendingTicketDownloadDataGlbl(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID, Integer userID,
			String filterStatus, String filterUser, String factorNumber);

	@Query(value="SELECT CAST(@sl\\:=@sl+1 AS UNSIGNED) as S_No,(SELECT CONCAT((select branch_code from im_branch where id=fb.branchID), '-',  t.ticket_number )) AS tktno,DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate ,fb.type,fb.ref_no,fb.name,fb.contact_no,fb.rating,fb.comments,(select ts.name from im_ticket_status ts where ts.id=t.status) as status,(select u.first_name from itx_users u where u .id=t.escalationid) AssignedTo, t.feedback_comments,t.note,t.dep_note as followupNote,t.pcm_data,t.corrective,t.callcenter,(select u.username from itx_users u where u.id=fb.created_by),(select b.name from im_branch b where b.id=fb.branchID) as branchName from ifb_feedback fb,itx_users u , itx_ticket t,(select @sl\\:=0) as sl where t.feedbackID=fb.id and fb.created_by=u.id and Date(fb.created_date)>=:startDate and Date(fb.created_date)<:endDate and fb.companyID=:companyID and (:countryID is null || :countryID='' || fb.countryID=:countryID ) and (:clusterID is null || :clusterID='' || u.clusterid=:clusterID ) and (:branchID is null || :branchID='' || fb.branchID=:branchID ) and (:typeID is null || :typeID='' || fb.type=:typeID ) and (:channelID is null || :channelID='' || fb.channelID=:channelID )     and (:filterStatus is null || :filterStatus='' || t.status=:filterStatus) and (:filterUser is null || :filterUser='' || t.escalationid=:filterUser) and (:factorNumber is null || :factorNumber='' || t.factor_number=:factorNumber) order by S_No asc ",nativeQuery = true)
	List<String[]> getTicketDownloadDataRubySasson(LocalDateTime startDate, LocalDateTime endDate, Integer companyID,
			Integer countryID, Integer clusterID, Integer branchID, String typeID, Integer channelID,
			String filterStatus, String filterUser, String factorNumber);
	@Query(value="select DATE_FORMAT(t.created_date, '%d-%m-%Y %H:%i:%s') createdDate,name,t.ticket_number,t.note,(select ts.name from im_ticket_status ts where ts.id=t.status),(select u.first_name from itx_users u where u .id=t.escalationid), DATE_FORMAT(t.updated_date, '%d-%m-%Y %H:%i:%s') updated_date from ifb_feedback fb, itx_ticket t where t.feedbackid=fb.id and t.ticket_number=:ticketID and t.companyid=:companyID ;",nativeQuery = true)
	List<String> ticketDetails(Integer companyID, Integer ticketID);

	@Query(value="select ticket_number from itx_ticket t where t.feedbackid=:feedbackId and t.companyID=:companyID",nativeQuery = true)
	List<Integer> getTicketIds(Integer companyID, Integer feedbackId);

	@Query(value="select companyid,ticket_number,(select ts.name from im_ticket_status ts where ts.id=t.status) from itx_ticket t where t.feedbackid=:feedbackId and t.companyID=:companyID",nativeQuery = true)
	List<String[]> getTicketDetails(Integer companyID, Integer feedbackId);

	@Query(value="SELECT col_que FROM im_factor_questions where commpanyid=:companyID and type=:type and id=:subFactorNumber",nativeQuery = true)
	String findColumnQuestion(int subFactorNumber, String type, int companyID);
	
	@Query(value="SELECT col_que FROM im_factor_questions where commpanyid=:companyID and type=:type and parentid=:factorNumber",nativeQuery = true)
	List<String> findSubColumnQuestion(int factorNumber, String type, int companyID);
	
	@Query(value="SELECT fc.comment1,fc.comment2,fc.comment3,fc.comment4,fc.comment5,fc.comment6,fc.comment7,fc.comment8,fc.comment9,fc.comment10,fc.comment11,fc.comment12,fc.comment13,fc.comment14,fc.comment15,fc.comment16,fc.comment17,fc.comment18,fc.comment19,fc.comment20,fc.comment21,fc.comment22,fc.comment23,fc.comment24,fc.comment25,fc.comment26,fc.comment27,fc.comment28,fc.comment29,fc.comment30,fc.comment31,fc.comment32,fc.comment33,fc.comment34,fc.comment35,fc.comment36,fc.comment37,fc.comment38,fc.comment39,fc.comment40,fc.comment41,fc.comment42,fc.comment43,fc.comment44,fc.comment45,fc.comment46,fc.comment47,fc.comment48,fc.comment49 from ifb_feedback_comments fc where fc.feedbackid=:feedbackID",nativeQuery = true)
	List<String[]> findFeedbackCommentsOP(int feedbackID);
	
	
	@Query(value="SELECT fc.comment1,fc.comment2,fc.comment3,fc.comment4,fc.comment5,fc.comment6,fc.comment7,fc.comment8,fc.comment9,fc.comment10,fc.comment11,fc.comment12,fc.comment13,fc.comment14,fc.comment15,fc.comment16,fc.comment17,fc.comment18,fc.comment19,fc.comment20,fc.comment21,fc.comment22,fc.comment23,fc.comment24,fc.comment25,fc.comment26,fc.comment27,fc.comment28,fc.comment29,fc.comment30,fc.comment31,fc.comment32,fc.comment33,fc.comment34,fc.comment35,fc.comment36,fc.comment37,fc.comment38,fc.comment39,fc.comment40,fc.comment41,fc.comment42,fc.comment43,fc.comment44,fc.comment45,fc.comment46,fc.comment47,fc.comment48,fc.comment49 from ifb_feedback_comments fc where fc.feedbackid=:feedbackID",nativeQuery = true)
	List<String[]> findFeedbackCommentsIP(int feedbackID);





}
